P8105_HW2_msp2210
================
Mukta Patwari
2025-09-23

## Set-up

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.2
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(haven)
library(readxl)
```

## Problem 1

Cleaning ‘pols-month’ dataset

``` r
pols_month_df =
  read_csv("fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names () %>% 
  separate(
    mon, into = c("year", "month", "day"),
    sep = "-"
  ) %>% 
  mutate(
    month = month.name[as.numeric(month)]
  ) %>% 
  mutate(
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem"
    )
  ) %>% 
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Cleaning ‘snp’ dataset

``` r
snp_df =
  read_csv("fivethirtyeight_datasets/snp.csv", 
      col_types = cols(date = col_date(format = "%m/%d/%y"))) %>% 
  janitor::clean_names() %>% 
  separate(
    date, into = c("year", "month", "day"),
    convert = TRUE,
  ) %>% 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.character(year)
  ) %>% 
  select (-day)
```

Cleaning ‘unemployment’ dataset

``` r
unemployment_df =
  read_csv("fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  drop_na %>% 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "percent_unemployed"
  ) %>% 
  mutate(
    month = str_to_title(month),
    year = as.character(year)
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Merging the ‘pols-month’ and ‘snp’ datasets together

``` r
merged_pols_snp =
  left_join(pols_month_df, snp_df, by = c("year", "month"))
```

Merging the new dataset with ‘unemployment’

``` r
merged_pols_snp_unemployment =
  left_join(merged_pols_snp, unemployment_df, by = c("year", "month"))
```

The cleaned ‘pols-month dataset’ contains 822 rows and the following 9
variables: year, month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem,
rep_dem, president. This dataset relates to politicians in the U.S.,
like what position they hold (presidential or in Congress), and their
party affiliation, Democrat or Republican. The ‘snp’ dataset refers to
the S&P index, and contains 787 rows with the date of the observation
and the price at closing. The cleaned ‘unemployment’ dataset contains
804 rows and gives the percentage of people unemployed in the month of
each year.

Combining these three data sets creates a merged dataset of 822 rows
with these variables: year, month, gov_gop, sen_gop, rep_gop, gov_dem,
sen_dem, rep_dem, president, close, percent_unemployed. The years range
from 1947 to 2015, which helps to capture the differences in political
affiliations, stock market events, and unemployment rates. As the
initial ‘snp’ dataset and ‘unemployment’ dataset contained less than 822
observations, there are unfortunately several NAs for the columns of
close and percent_unemployed in the merged dataset.

## Problem 2

Cleaning Mr. Trash Wheel dataset

``` r
mrtrash_df =
  read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = 1, range = "A2:N653", col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    year = as.numeric(year)
  ) %>% 
  mutate(
    sports_balls = as.integer(round(sports_balls))
  ) %>% 
  mutate(
    trashwheel_name = "Mr. Trash Wheel"
  )
```

Cleaning Professor Trash Wheel dataset

``` r
proftrash_df =
  read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = 2, range = "A2:M120", col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    trashwheel_name = "Professor Trash Wheel"
  )
```

Cleaning Gwynnda dataset

``` r
gwynnda_df =
  read_excel("202409 Trash Wheel Collection Data.xlsx", sheet = 4, range = "A2:L265", col_names = TRUE) %>% 
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(
    trashwheel_name = "Gwynnda Trash Wheel"
  )
```

Merging datasets

``` r
trashwheel_df =
  bind_rows(mrtrash_df, proftrash_df, gwynnda_df)
```

The cleaned dataset contains 1032 observations of trash collected by
Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda. Key variables
include `dumpster` (the dumpster number where the trash is collected)
`weight_tons` (the weight in tons of trash collected), `trashwheel_name`
(shows which trash wheel collected the trash). An interesting variable
is `homes_powered`, which captures how many homes benefitted from the
trash wheel collecting trash to be incinerated and to be converted to
electricity.
